// build time:Wed Jun 19 2019 22:10:19 GMT+0800 (GMT+08:00)
var stars=[],star_r=3,star_alpha=5,initStarsPopulation=50,move_distance=.25,dots=[],dot_r=5,dot_speeds=.5,dot_alpha=.5,dot_aReduction=.01,dotsMinDist=5,maxDistFromCursor=50,canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),WIDTH,HEIGHT,mouseMoving=false,mouseMoveChecker,mouseX,mouseY;function Star(t,i,s,e){this.id=t;this.x=i;this.y=s;this.useCacha=e;this.cacheCanvas=document.createElement("canvas");this.cacheCtx=this.cacheCanvas.getContext("2d");this.r=Math.floor(Math.random()*star_r)+1;this.cacheCtx.width=6*this.r;this.cacheCtx.height=6*this.r;var h=(Math.floor(Math.random()*10)+1)/star_alpha;this.color="rgba(255,255,255,"+h+")";if(e){this.cache()}}Star.prototype={draw:function(){if(!this.useCacha){ctx.save();ctx.fillStyle=this.color;ctx.shadowBlur=this.r*2;ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI,false);ctx.closePath();ctx.fill();ctx.restore()}else{ctx.drawImage(this.cacheCanvas,this.x-this.r,this.y-this.r)}},cache:function(){this.cacheCtx.save();this.cacheCtx.fillStyle=this.color;this.cacheCtx.shadowColor="white";this.cacheCtx.shadowBlur=this.r*2;this.cacheCtx.beginPath();this.cacheCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI);this.cacheCtx.closePath();this.cacheCtx.fill();this.cacheCtx.restore()},move:function(){this.y-=move_distance;if(this.y<=-10){this.y+=HEIGHT+10}this.draw()},die:function(){stars[this.id]=null;delete stars[this.id]}};function Dot(t,i,s,e){this.id=t;this.x=i;this.y=s;this.r=Math.floor(Math.random()*dot_r)+1;this.speed=dot_speeds;this.a=dot_alpha;this.aReduction=dot_aReduction;this.useCache=e;this.dotCanvas=document.createElement("canvas");this.dotCtx=this.dotCanvas.getContext("2d");this.dotCtx.width=6*this.r;this.dotCtx.height=6*this.r;this.dotCtx.a=.5;this.color="rgba(255,255,255,"+this.a+")";this.dotCtx.color="rgba(255,255,255,"+this.dotCtx.a+")";this.linkColor="rgba(255,255,255,"+this.a/4+")";this.dir=Math.floor(Math.random()*140)+200;if(e){this.cache()}}Dot.prototype={draw:function(){if(!this.useCache){ctx.save();ctx.fillStyle=this.color;ctx.shadowColor="white";ctx.shadowBlur=this.r*2;ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI,false);ctx.closePath();ctx.fill();ctx.restore()}else{ctx.drawImage(this.dotCanvas,this.x-this.r*3,this.y-this.r*3)}},cache:function(){this.dotCtx.save();this.dotCtx.a-=this.aReduction;this.dotCtx.color="rgba(255,255,255,"+this.dotCtx.a+")";this.dotCtx.fillStyle=this.dotCtx.color;this.dotCtx.shadowColor="white";this.dotCtx.shadowBlur=this.r*2;this.dotCtx.beginPath();this.dotCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI,false);this.dotCtx.closePath();this.dotCtx.fill();this.dotCtx.restore()},link:function(){if(this.id==0)return;var t=getPreviousDot(this.id,1);var i=getPreviousDot(this.id,2);var s=getPreviousDot(this.id,3);var e=getPreviousDot(this.id,4);if(!t)return;ctx.strokeStyle=this.linkColor;ctx.moveTo(t.x,t.y);ctx.beginPath();ctx.lineTo(this.x,this.y);if(i!=false)ctx.lineTo(i.x,i.y);if(s!=false)ctx.lineTo(s.x,s.y);if(e!=false)ctx.lineTo(e.x,e.y);ctx.stroke();ctx.closePath()},move:function(){this.a-=this.aReduction;if(this.a<=0){this.die();return}this.dotCtx.a-=this.aReduction;this.dotCtx.color="rgba(255,255,255,"+this.dotCtx.a+")";this.color="rgba(255,255,255,"+this.a+")";this.linkColor="rgba(255,255,255,"+this.a/4+")";this.x=this.x+Math.cos(degToRad(this.dir))*this.speed;this.y=this.y+Math.sin(degToRad(this.dir))*this.speed;this.draw();this.link()},die:function(){dots[this.id]=null;delete dots[this.id]}};window.onmousemove=function(t){mouseMoving=true;mouseX=t.clientX;mouseY=t.clientY;clearInterval(mouseMoveChecker);mouseMoveChecker=setInterval(function(){mouseMoving=false},1e3)};function getPreviousDot(t,i){if(t==0||t-i<0){return false}if(typeof dots[t-i]!=="undefined"){return dots[t-i]}else{return false}}function setCanvasSize(){WIDTH=document.documentElement.clientWidth;HEIGHT=document.documentElement.clientHeight;canvas.setAttribute("width",WIDTH);canvas.setAttribute("height",HEIGHT)}function init(){ctx.strokeStyle="white";ctx.shadowColor="white";for(var t=0;t<initStarsPopulation;t++){stars[t]=new Star(t,Math.floor(Math.random()*WIDTH),Math.floor(Math.random()*HEIGHT),true)}ctx.shadowBlur=0;animate()}function animate(){ctx.clearRect(0,0,WIDTH,HEIGHT);for(var t in stars){stars[t].move()}for(var t in dots){dots[t].move()}requestAnimationFrame(animate)}function degToRad(t){return t*(Math.PI/180)}setCanvasSize();init();
//rebuild by neat 